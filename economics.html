<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>经济科学 - 城院二手市场</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="container">
            <nav class="navbar">
                <button class="back-btn" onclick="window.history.back()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="title">经济科学</div>
                <button class="back-btn" style="visibility: hidden;">
                    <i class="fas fa-arrow-left"></i>
                </button>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="science-books">
            <div class="book-item">
                <div class="book-item-image" onclick="showBookDetail('经济学原理（曼昆）', 45.00, '曼昆的经济学原理是全球最畅销的经济学教材之一，内容通俗易懂，适合初学者入门学习。', 'https://img.alicdn.com/bao/uploaded/i2/2206695548517/O1CN01g7y5U81M8qJxg9JfK_!!0-item_pic.jpg')">
                    <img src="https://img.alicdn.com/bao/uploaded/i2/2206695548517/O1CN01g7y5U81M8qJxg9JfK_!!0-item_pic.jpg" alt="经济学原理">
                </div>
                <div class="book-item-details">
                    <div class="book-item-title">经济学原理（曼昆）</div>
                    <div class="book-item-price">¥45.00</div>
                    <div class="book-item-actions">
                        <button class="action-btn add-to-cart" onclick="addToCart('经济学原理（曼昆）', 45.00, 'https://img.alicdn.com/bao/uploaded/i2/2206695548517/O1CN01g7y5U81M8qJxg9JfK_!!0-item_pic.jpg')">加入购物车</button>
                        <button class="action-btn buy-now" onclick="buyNow('经济学原理（曼昆）', 45.00)">立即购买</button>
                    </div>
                </div>
            </div>
            
            <div class="book-item">
                <div class="book-item-image" onclick="showBookDetail('宏观经济学（第九版）', 38.00, '宏观经济学经典教材，系统介绍了宏观经济的基本理论、模型和政策分析。', 'https://img13.360buyimg.com/n1/jfs/t1/86526/15/22709/187006/62d4abfbE4a566676/4ad6b402664a50e5.jpg')">
                    <img src="https://img13.360buyimg.com/n1/jfs/t1/86526/15/22709/187006/62d4abfbE4a566676/4ad6b402664a50e5.jpg" alt="宏观经济学">
                </div>
                <div class="book-item-details">
                    <div class="book-item-title">宏观经济学（第九版）</div>
                    <div class="book-item-price">¥38.00</div>
                    <div class="book-item-actions">
                        <button class="action-btn add-to-cart" onclick="addToCart('宏观经济学（第九版）', 38.00, 'https://img13.360buyimg.com/n1/jfs/t1/86526/15/22709/187006/62d4abfbE4a566676/4ad6b402664a50e5.jpg')">加入购物车</button>
                        <button class="action-btn buy-now" onclick="buyNow('宏观经济学（第九版）', 38.00)">立即购买</button>
                    </div>
                </div>
            </div>
            
            <div class="book-item">
                <div class="book-item-image" onclick="showBookDetail('货币金融学（米什金）', 42.00, '米什金的货币金融学是金融学领域的经典教材，全面介绍了货币、银行和金融市场的基本原理。', 'https://img14.360buyimg.com/n1/jfs/t1/169196/17/26550/282595/6185c4aaEa40d8b45/38f4a5b0cc4a1340.jpg')">
                    <img src="https://img14.360buyimg.com/n1/jfs/t1/169196/17/26550/282595/6185c4aaEa40d8b45/38f4a5b0cc4a1340.jpg" alt="货币金融学">
                </div>
                <div class="book-item-details">
                    <div class="book-item-title">货币金融学（米什金）</div>
                    <div class="book-item-price">¥42.00</div>
                    <div class="book-item-actions">
                        <button class="action-btn add-to-cart" onclick="addToCart('货币金融学（米什金）', 42.00, 'https://img14.360buyimg.com/n1/jfs/t1/169196/17/26550/282595/6185c4aaEa40d8b45/38f4a5b0cc4a1340.jpg')">加入购物车</button>
                        <button class="action-btn buy-now" onclick="buyNow('货币金融学（米什金）', 42.00)">立即购买</button>
                    </div>
                </div>
            </div>
            
            <div class="book-item">
                <div class="book-item-image" onclick="showBookDetail('计量经济学导论', 35.00, '计量经济学入门教材，系统介绍了计量经济学的基本原理、方法和应用。', 'https://img10.360buyimg.com/n1/jfs/t1/134209/13/20978/230747/62d4abfbE39f5431b/f8eaa4e983b13a91.jpg')">
                    <img src="https://img10.360buyimg.com/n1/jfs/t1/134209/13/20978/230747/62d4abfbE39f5431b/f8eaa4e983b13a91.jpg" alt="计量经济学">
                </div>
                <div class="book-item-details">
                    <div class="book-item-title">计量经济学导论</div>
                    <div class="book-item-price">¥35.00</div>
                    <div class="book-item-actions">
                        <button class="action-btn add-to-cart" onclick="addToCart('计量经济学导论', 35.00, 'https://img10.360buyimg.com/n1/jfs/t1/134209/13/20978/230747/62d4abfbE39f5431b/f8eaa4e983b13a91.jpg')">加入购物车</button>
                        <button class="action-btn buy-now" onclick="buyNow('计量经济学导论', 35.00)">立即购买</button>
                    </div>
                </div>
            </div>
            
            <div class="book-item">
                <div class="book-item-image" onclick="showBookDetail('国际经济学（理论与政策）', 40.00, '国际经济学经典教材，系统介绍了国际贸易和国际金融的基本理论与政策。', 'https://img12.360buyimg.com/n1/jfs/t1/147250/4/23980/183963/62d4abfbE894d2b8f/1c6166f136dbe800.jpg')">
                    <img src="https://img12.360buyimg.com/n1/jfs/t1/147250/4/23980/183963/62d4abfbE894d2b8f/1c6166f136dbe800.jpg" alt="国际经济学">
                </div>
                <div class="book-item-details">
                    <div class="book-item-title">国际经济学（理论与政策）</div>
                    <div class="book-item-price">¥40.00</div>
                    <div class="book-item-actions">
                        <button class="action-btn add-to-cart" onclick="addToCart('国际经济学（理论与政策）', 40.00, 'https://img12.360buyimg.com/n1/jfs/t1/147250/4/23980/183963/62d4abfbE894d2b8f/1c6166f136dbe800.jpg')">加入购物车</button>
                        <button class="action-btn buy-now" onclick="buyNow('国际经济学（理论与政策）', 40.00)">立即购买</button>
                    </div>
                </div>
            </div>
            
            <div class="book-item">
                <div class="book-item-image" onclick="showBookDetail('财政学（第九版）', 32.00, '财政学经典教材，系统介绍了财政学的基本理论、制度和政策分析。', 'https://img13.360buyimg.com/n1/jfs/t1/204781/17/23275/264902/62d4abfbE37db5a1c/aad4a104a41b4b3b.jpg')">
                    <img src="https://img13.360buyimg.com/n1/jfs/t1/204781/17/23275/264902/62d4abfbE37db5a1c/aad4a104a41b4b3b.jpg" alt="财政学">
                </div>
                <div class="book-item-details">
                    <div class="book-item-title">财政学（第九版）</div>
                    <div class="book-item-price">¥32.00</div>
                    <div class="book-item-actions">
                        <button class="action-btn add-to-cart" onclick="addToCart('财政学（第九版）', 32.00, 'https://img13.360buyimg.com/n1/jfs/t1/204781/17/23275/264902/62d4abfbE37db5a1c/aad4a104a41b4b3b.jpg')">加入购物车</button>
                        <button class="action-btn buy-now" onclick="buyNow('财政学（第九版）', 32.00)">立即购买</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 书籍详情弹窗 -->
    <div class="book-detail-modal" id="bookDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalBookTitle">书籍标题</h3>
                <button class="close-modal" onclick="closeBookDetail()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-book-image">
                    <img id="modalBookImage" src="" alt="">
                </div>
                <div class="modal-book-info">
                    <div class="modal-book-price" id="modalBookPrice">¥0.00</div>
                    <div class="modal-book-description" id="modalBookDescription">书籍描述</div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="action-btn add-to-cart" onclick="addToCartFromModal()">加入购物车</button>
                <button class="action-btn buy-now" onclick="buyNowFromModal()">立即购买</button>
            </div>
        </div>
    </div>

    <!-- 底部导航栏 -->
    <div class="bottom-nav">
        <a href="index.html" class="nav-item">
            <div class="nav-icon"><i class="fas fa-home"></i></div>
            <div>首页</div>
        </a>
        <a href="sell.html" class="nav-item">
            <div class="nav-icon"><i class="fas fa-tag"></i></div>
            <div>卖书</div>
        </a>
        <a href="cart.html" class="nav-item">
            <div class="nav-icon">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-badge" id="cartBadge" style="display: none;">0</span>
            </div>
            <div>购物车</div>
        </a>
        <a href="profile.html" class="nav-item">
            <div class="nav-icon"><i class="fas fa-user"></i></div>
            <div>我的</div>
        </a>
    </div>

    <!-- 提示框 -->
    <div class="toast" id="toast"></div>

    <script src="script.js"></script>
    <script>
        let currentBook = {};
        
        function showBookDetail(title, price, description, image) {
            currentBook = { title, price, description, image };
            
            document.getElementById('modalBookTitle').textContent = title;
            document.getElementById('modalBookPrice').textContent = `¥${price.toFixed(2)}`;
            document.getElementById('modalBookDescription').textContent = description;
            document.getElementById('modalBookImage').src = image;
            
            document.getElementById('bookDetailModal').classList.add('active');
        }
        
        function closeBookDetail() {
            document.getElementById('bookDetailModal').classList.remove('active');
        }
        
        function addToCart(title, price, image) {
            if (!checkLoginStatus()) {
                showToast('请先登录');
                setTimeout(() => {
                    window.location.href = 'profile.html';
                }, 1000);
                return;
            }
            
            const cartItem = {
                title: title,
                price: price,
                image: image
            };
            
            addToCart(cartItem);
            showToast('已加入购物车');
        }
        
        function addToCartFromModal() {
            if (!checkLoginStatus()) {
                showToast('请先登录');
                closeBookDetail();
                setTimeout(() => {
                    window.location.href = 'profile.html';
                }, 1000);
                return;
            }
            
            const cartItem = {
                title: currentBook.title,
                price: currentBook.price,
                image: currentBook.image
            };
            
            addToCart(cartItem);
            showToast('已加入购物车');
            closeBookDetail();
        }
        
        function buyNow(title, price) {
            if (!checkLoginStatus()) {
                showToast('请先登录');
                setTimeout(() => {
                    window.location.href = 'profile.html';
                }, 1000);
                return;
            }
            
            showToast('立即购买功能开发中');
        }
        
        function buyNowFromModal() {
            if (!checkLoginStatus()) {
                showToast('请先登录');
                closeBookDetail();
                setTimeout(() => {
                    window.location.href = 'profile.html';
                }, 1000);
                return;
            }
            
            showToast('立即购买功能开发中');
        }
        
        // 点击模态框外部关闭
        document.getElementById('bookDetailModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeBookDetail();
            }
        });
        
        // 添加购物车和购买按钮事件
        document.querySelectorAll('.add-to-cart').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        });
        
        document.querySelectorAll('.buy-now').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>首页 - 城院二手市场</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo">
                    <div class="logo-icon">城</div>
                    <h1>城院二手市场</h1>
                </div>
                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="banner">
            <h2>让知识流动，让书籍重生</h2>
            <p>在这里，您可以找到心仪的二手书籍</p>
        </div>
        
        <div class="search-bar">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="搜索书籍、教材...">
        </div>
        
        <div class="category-grid">
            <a href="science.html" class="category-item">
                <div class="category-icon"><i class="fas fa-flask"></i></div>
                <div class="category-text">理工材料</div>
            </a>
            <a href="economics.html" class="category-item">
                <div class="category-icon"><i class="fas fa-chart-line"></i></div>
                <div class="category-text">经济科学</div>
            </a>
            <a href="#" class="category-item">
                <div class="category-icon"><i class="fas fa-book"></i></div>
                <div class="category-text">人文社科</div>
            </a>
            <a href="#" class="category-item">
                <div class="category-icon"><i class="fas fa-graduation-cap"></i></div>
                <div class="category-text">上岸必备</div>
            </a>
        </div>
        
        <h3 style="margin: 20px 0 10px;">热门推荐</h3>
        <div class="book-grid">
            <div class="book-card" onclick="showBookDetail('数据结构与算法分析', 25.00, '数据结构与算法分析是一本经典的计算机科学教材，涵盖了各种数据结构和算法的设计与分析。', 'https://ts1.tc.mm.bing.net/th/id/R-C.4314d0a58447f19e678473cdac6a05ef?rik=cyjExGIelB0LXA&riu=http%3a%2f%2fimage12.bookschina.com%2f2019%2f20190603%2f4%2f8059349.jpg&ehk=f9iS4LByPB3Sb55cvCOhw0kfWcwf4T6NQ71Ql2%2bBrT0%3d&risl=&pid=ImgRaw&r=0')">
                <div class="book-image">
                    <img src="https://ts1.tc.mm.bing.net/th/id/R-C.4314d0a58447f19e678473cdac6a05ef?rik=cyjExGIelB0LXA&riu=http%3a%2f%2fimage12.bookschina.com%2f2019%2f20190603%2f4%2f8059349.jpg&ehk=f9iS4LByPB3Sb55cvCOhw0kfWcwf4T6NQ71Ql2%2bBrT0%3d&risl=&pid=ImgRaw&r=0" alt="数据结构">
                </div>
                <div class="book-details">
                    <div class="book-title">数据结构与算法分析</div>
                    <div class="book-price">¥25.00</div>
                </div>
            </div>
            <div class="book-card" onclick="showBookDetail('计算机网络：自顶向下方法', 30.00, '本书采用自顶向下的方法讲解计算机网络，从应用层开始逐层深入，是学习计算机网络的经典教材。', 'https://tse1-mm.cn.bing.net/th/id/OIP-C.iC3ri46CRaQdSANSuc-dzAHaHa?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3')">
                <div class="book-image">
                    <img src="https://tse1-mm.cn.bing.net/th/id/OIP-C.iC3ri46CRaQdSANSuc-dzAHaHa?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3" alt="计算机网络">
                </div>
                <div class="book-details">
                    <div class="book-title">计算机网络：自顶向下方法</div>
                    <div class="book-price">¥30.00</div>
                </div>
            </div>
            <div class="book-card" onclick="showBookDetail('Java编程思想（第4版）', 35.00, 'Java编程思想是学习Java语言的经典教材，深入浅出地讲解了Java编程的核心概念和思想。', 'https://img.alicdn.com/i3/101450072/O1CN01lyoEUe1CP197DYVhA-101450072.jpg')">
                <div class="book-image">
                    <img src="https://img.alicdn.com/i3/101450072/O1CN01lyoEUe1CP197DYVhA-101450072.jpg" alt="Java编程">
                </div>
                <div class="book-details">
                    <div class="book-title">Java编程思想（第4版）</div>
                    <div class="book-price">¥35.00</div>
                </div>
            </div>
            <div class="book-card" onclick="showBookDetail('操作系统概念（第九版）', 28.00, '操作系统概念是操作系统领域的经典教材，全面介绍了操作系统的核心概念和原理。', 'https://img13.360buyimg.com/n1/jfs/t1/9390/3/14697/106302/5c67af40E84f03a11/dc55f328ccfb6787.jpg')">
                <div class="book-image">
                    <img src="https://img13.360buyimg.com/n1/jfs/t1/9390/3/14697/106302/5c67af40E84f03a11/dc55f328ccfb6787.jpg" alt="操作系统">
                </div>
                <div class="book-details">
                    <div class="book-title">操作系统概念（第九版）</div>
                    <div class="book-price">¥28.00</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 书籍详情弹窗 -->
    <div class="book-detail-modal" id="bookDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalBookTitle">书籍标题</h3>
                <button class="close-modal" onclick="closeBookDetail()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-book-image">
                    <img id="modalBookImage" src="" alt="">
                </div>
                <div class="modal-book-info">
                    <div class="modal-book-price" id="modalBookPrice">¥0.00</div>
                    <div class="modal-book-description" id="modalBookDescription">书籍描述</div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="action-btn add-to-cart" onclick="addToCartFromModal()">加入购物车</button>
                <button class="action-btn buy-now" onclick="buyNowFromModal()">立即购买</button>
            </div>
        </div>
    </div>

    <!-- 底部导航栏 -->
    <div class="bottom-nav">
        <a href="index.html" class="nav-item active">
            <div class="nav-icon"><i class="fas fa-home"></i></div>
            <div>首页</div>
        </a>
        <a href="sell.html" class="nav-item">
            <div class="nav-icon"><i class="fas fa-tag"></i></div>
            <div>卖书</div>
        </a>
        <a href="cart.html" class="nav-item">
            <div class="nav-icon">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-badge" id="cartBadge" style="display: none;">0</span>
            </div>
            <div>购物车</div>
        </a>
        <a href="profile.html" class="nav-item">
            <div class="nav-icon"><i class="fas fa-user"></i></div>
            <div>我的</div>
        </a>
    </div>

    <!-- 提示框 -->
    <div class="toast" id="toast"></div>

    <script src="script.js"></script>
    <script>
        let currentBook = {};
        
        function showBookDetail(title, price, description, image) {
            currentBook = { title, price, description, image };
            
            document.getElementById('modalBookTitle').textContent = title;
            document.getElementById('modalBookPrice').textContent = `¥${price.toFixed(2)}`;
            document.getElementById('modalBookDescription').textContent = description;
            document.getElementById('modalBookImage').src = image;
            
            document.getElementById('bookDetailModal').classList.add('active');
        }
        
        function closeBookDetail() {
            document.getElementById('bookDetailModal').classList.remove('active');
        }
        
        function addToCartFromModal() {
            if (!checkLoginStatus()) {
                showToast('请先登录');
                closeBookDetail();
                setTimeout(() => {
                    window.location.href = 'profile.html';
                }, 1000);
                return;
            }
            
            const cartItem = {
                title: currentBook.title,
                price: currentBook.price,
                image: currentBook.image
            };
            
            addToCart(cartItem);
            showToast('已加入购物车');
            closeBookDetail();
        }
        
        function buyNowFromModal() {
            if (!checkLoginStatus()) {
                showToast('请先登录');
                closeBookDetail();
                setTimeout(() => {
                    window.location.href = 'profile.html';
                }, 1000);
                return;
            }
            
            showToast('立即购买功能开发中');
        }
        
        // 点击模态框外部关闭
        document.getElementById('bookDetailModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeBookDetail();
            }
        });
    </script>
</body>
</html>